<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Profile | NoDue+</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --text: #1e293b; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; color: var(--text); }
        .sidebar { width: 260px; background: white; padding: 30px; display: flex; flex-direction: column; border-right: 1px solid #e2e8f0; }
        .main-content { flex: 1; padding: 40px; overflow-y: auto; display: flex; justify-content: center; align-items: flex-start; }
        
        .card { background: white; width: 100%; max-width: 600px; padding: 40px; border-radius: 20px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 500; color: #64748b; font-size: 0.9rem; }
        input, select { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 10px; font-family: inherit; font-size: 1rem; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        
        .btn-save { background: var(--primary); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 1rem; margin-top: 10px; }
        .btn-save:hover { background: #4f46e5; }
        
        .back-link { display: inline-flex; align-items: center; gap: 5px; color: #64748b; text-decoration: none; margin-bottom: 20px; font-weight: 500; }
        .back-link:hover { color: var(--primary); }
    </style>
</head>
<body>

    <div class="sidebar">
        <div style="font-size:1.5rem; font-weight:700; color:var(--primary); margin-bottom:40px;">NoDue+</div>
        <div>
            <div style="font-weight:600;" th:text="${user.name}">Name</div>
            <div style="font-size:0.9rem; color:#64748b;" th:text="${user.department}">Dept</div>
        </div>
        <a href="/logout" style="margin-top:auto; color:#ef4444; text-decoration:none;">Logout</a>
    </div>

    <div class="main-content">
        <div style="width: 100%; max-width: 600px;">
            <a href="/student-dashboard" class="back-link"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
            
            <div class="card">
                <h2 style="margin: 0 0 20px 0; color: #1e293b;">Edit Profile</h2>
                
                <form action="/update-profile" method="POST">
                    
                    <div class="input-group">
                        <label>Roll Number (Cannot be changed)</label>
                        <input type="text" th:value="${user.id}" disabled style="background: #f1f5f9; color: #94a3b8;">
                    </div>

                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" name="name" th:value="${user.name}" required>
                    </div>

                    <div class="input-group">
                        <label>Department</label>
                        <select name="department">
                            <option value="CSE" th:selected="${user.department == 'CSE'}">CSE</option>
                            <option value="ECE" th:selected="${user.department == 'ECE'}">ECE</option>
                            <option value="AI&DS" th:selected="${user.department == 'AI&DS'}">AI & DS</option>
                            <option value="IT" th:selected="${user.department == 'IT'}">IT</option>
                            <option value="MECH" th:selected="${user.department == 'MECH'}">MECH</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>New Password</label>
                        <input type="text" name="password" th:value="${user.password}" required>
                    </div>

                    <button type="submit" class="btn-save">Save Changes</button>
                </form>
            </div>
        </div>
    </div>

</body>
</html>